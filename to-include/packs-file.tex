\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{lmodern}
\usepackage[english]{babel}
\usepackage[cyr]{aeguill}
\usepackage{charter}

\usepackage[top=1.1in, bottom=0.95in, outer=5cm, inner=2cm, heightrounded, marginparwidth=2.5cm, marginparsep=2cm]{geometry}

\usepackage[Sonny]{fncychap} % Sonny Lenny Glenn Conny Rejne Bjarne Bjornstrup

\ChTitleVar{\Huge\bfseries}
\ChNameVar{\large\bfseries}
\ChNumVar{\fontsize{60}{62}\bfseries}

\usepackage{fancyhdr}
\pagestyle{fancy}

\fancyhead{}
\fancyfoot{}

\fancyhead[LE, RO]{\bfseries\thepage}

\fancyhead[RE]{\bfseries\nouppercase{\leftmark}}
\fancyhead[LO]{\bfseries\nouppercase{\rightmark}}

\let\headruleORIG\headrule
\renewcommand{\headrule}{\color{black} \headruleORIG}

\setlength{\headheight}{15pt}

\makeatletter
\if@twoside % commands below work only for twoside option of \documentclass
    \newlength{\textblockoffset}
    \setlength{\textblockoffset}{12mm}
    \addtolength{\hoffset}{\textblockoffset}
    \addtolength{\evensidemargin}{-2.0\textblockoffset}
\fi
\makeatother

\renewcommand{\baselinestretch}{1.1}

\usepackage{pifont}
\usepackage{dsfont}
\usepackage{shorttoc}
\usepackage{eqparbox}
\usepackage{sidecap}

\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{mathtools}
\usepackage{nicefrac}

\usepackage{supertabular}
\usepackage{tabularx}
\usepackage{tabulary}
\usepackage{setspace}
\usepackage[dvips]{graphicx}
\usepackage{epsfig}
\usepackage{float}
\usepackage{psfrag}
\usepackage{epstopdf}
\usepackage{adforn}
\usepackage{array}
\usepackage{pifont}
\usepackage{textcomp}
\usepackage{multirow}

\usepackage{multirow}
\usepackage[boxed]{algorithm}
\usepackage{algorithmic}
\usepackage{rotating}
\usepackage{floatpag}

\usepackage{booktabs}
\newcommand{\ra}[1]{\renewcommand{\arraystretch}{#1}}

\usepackage{caption}
\usepackage{subcaption}
\usepackage[section, above, below]{placeins}

\addto\captionsenglish{\renewcommand{\figurename}{Fig.}}
\addto\captionsenglish{\renewcommand{\tablename}{Tab.}}

\usepackage{xcolor}
\usepackage{esint}

\usepackage{multicol}

\usepackage[nottoc, notlof, notlot]{tocbibind}
\usepackage[english, tight]{minitoc}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\setlength{\mtcindent}{0pt}
\mtcsetformat{minitoc}{tocrightmargin}{2.55em plus 1fil}
\newcommand{\multicolumnmtc}{2}
\makeatletter
\let\SV@mtc@verse\mtc@verse
\let\SV@endmtc@verse\endmtc@verse
\def\mtc@verse#1{\SV@mtc@verse#1\removelastskip%
    \begin{multicols}{\multicolumnmtc}\raggedcolumns\leavevmode\unskip
        \vskip -1.5ex \vskip -1\baselineskip}
        \def\endmtc@verse{\end{multicols}\SV@endmtc@verse}
\makeatother
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage{tikz}
\usetikzlibrary{shapes,arrows}

%%% MatLab Figures Gen
\usepackage{pgfplots}
\pgfplotsset{compat=newest}
\pgfplotsset{plot coordinates/math parser=false}
\usetikzlibrary{plotmarks}
%%%%%
\newcommand{\Int}[4]{\draw[fill=white](#1, #2)rectangle(#3, #4);}

\usepackage{pgfplots}
\pgfplotsset{
    dirac/.style={
            mark=triangle*,
            mark options={scale=2},
            ycomb,
            scatter,
            visualization depends on={y/abs(y)-1 \as \sign},
            scatter/@pre marker code/.code={\scope[rotate=90*\sign,yshift=-2pt]}
        }
}

% --------------------- Thm, Rema, Exmp, Proof ---------------------
\theoremstyle{plain}
\newtheorem{THM}{Theorem}[section]
\newtheorem{Lem}[THM]{Lemma}
\newtheorem{Prop}[THM]{Proposition}
\newtheorem{Not}[THM]{Notation}
% \newtheorem*{Cor}[Thm]{Corollaire}

\theoremstyle{definition}
\newtheorem{DEF}{Definition}[section]
\newtheorem{Conj}{Conjecture}[section]
\newtheorem{EXMP}{Example}[section]

\theoremstyle{remark}
\newtheorem{Rema}{Remark}[section]% \newtheorem{Rema}[Thm]{Remarque}
\newtheorem*{Note}{Note}
\newtheorem{Case}{Case}

\usepackage{pagecolor}
\usepackage[framemethod=TikZ]{mdframed}
\usepackage{hf-tikz}
\usetikzlibrary{calc}

% --------------------- Thm Def Exmp ---------------------
\usepackage[most]{tcolorbox}
\tcbuselibrary{theorems}

\newtcolorbox[auto counter, number within=section]{Thm}[2][]{%
    enhanced,
    colframe=black,
    colback=white,
    colbacktitle=white,
    coltitle=black,
    attach boxed title to top left={xshift=5mm,yshift*=-\tcboxedtitleheight/2},
    fonttitle=\bfseries,
    title=Theorem~\thetcbcounter: #2,#1}

% \input{Packs/MyLema}% Empty
% \input{Packs/MyNota}% Empty
% \input{Packs/MyRema}% Empty

\theoremstyle{definition}
\newtheorem{Def}{Definition}[section]
\surroundwithmdframed[outerlinewidth=0pt, innerlinewidth=0.5pt, middlelinewidth=1pt, middlelinecolor=white]{Def}


% https://github.com/badge/bham-latex-preamble

\usepackage{thmtools, needspace}

\newcommand{\exrule}{\rule{\textwidth}{1pt}}

\declaretheoremstyle[
    spaceabove = 15pt, spacebelow=15pt,  % Space above and below the entire example
    headfont   = \bfseries,  % Head font
    headformat = $\blacktriangledown$ Example~\NUMBER\NOTE\vspace{-3mm},
    headpunct  = \newline\exrule\newline,    % Punctuation after the head
    notefont   = \itshape,           % Font of the note (example name in this case)
    notebraces = {--- }{},           % Braces before and after note; again be careful with spaces.
    bodyfont   = \leftskip=0em \rightskip=0em \itshape \rmfamily \linespread{1.05}, % Body font and formatting
    preheadhook   = \Needspace*{4\baselineskip},  % Hook before the head; using needspace to ensure the head of the example is not on a separate page to its body.
    postheadspace = 0pt,              % Space after the head; we want none as we have a new line already
    prefoothook   = \ifhmode \hspace*{\fill}\newline \else \vspace{-5mm} \fi \exrule  % Hook for LaTeX code before the foot of the example (the space below it). If we are in horizontal mode, add a new line, otherwise just draw the ruled line. This makes 90% of the examples require no manual spacing.
]{examplestyle}

\declaretheorem[style=examplestyle, numberwithin=section]{Exmp}


\tcbset{
    thmbox/.style={
            enhanced,
            breakable,
            sharp corners=all,
            fonttitle=\bfseries\normalsize,
            fontupper=\normalsize\itshape,
            top=0mm,
            bottom=0mm,
            right=0mm,
            colback=white,
            colframe=white,
            colbacktitle=white,
            coltitle=black,
            attach boxed title to top left,
            boxed title style={empty, size=minimal, bottom=1.5mm},
            overlay unbroken ={
                    \draw (title.south west)--(title.south east);
                    \draw ([xshift=3.5mm]frame.north west)|-%
                    (frame.south east)--(frame.north east);},
            overlay first={
                    \draw (title.south west)--(title.south east);
                    \draw ([xshift=3.5mm]frame.north west)--([xshift=3.5mm]frame.south west);
                    \draw (frame.north east)--(frame.south east);},
            overlay middle={
                    \draw ([xshift=3.5mm]frame.north west)--([xshift=3.5mm]frame.south west);
                    \draw (frame.north east)--(frame.south east);},
            overlay last={
                    \draw ([xshift=3.5mm]frame.north west)|-%
                    (frame.south east)--(frame.north east);},
        },
    S/.style={thmbox,
            overlay unbroken ={
                    \draw (title.south west)--(title.south east);
                    \draw ([xshift=3.5mm]frame.north west)--([xshift=3.5mm]frame.south west);},
            overlay first={
                    \draw (title.south west)--(title.south east);
                    \draw ([xshift=3.5mm]frame.north west)--([xshift=3.5mm]frame.south west);},
            overlay middle={
                    \draw ([xshift=3.5mm]frame.north west)--([xshift=3.5mm]frame.south west);},
            overlay last={
                    \draw ([xshift=3.5mm]frame.north west)--([xshift=3.5mm]frame.south west);},
        },
    L/.style={thmbox,
            overlay unbroken ={
                    \draw (title.south west)--(title.south east);
                    \draw ([xshift=3.5mm]frame.north west)|-([xshift=15mm]frame.south west);},
            overlay first={
                    \draw (title.south west)--(title.south east);
                    \draw ([xshift=3.5mm]frame.north west)--([xshift=3.5mm]frame.south west);},
            overlay middle={
                    \draw ([xshift=3.5mm]frame.north west)--([xshift=3.5mm]frame.south west);},
            overlay last={
                    \draw ([xshift=3.5mm]frame.north west)|-([xshift=15mm]frame.south west);},
        },
    LQ/.style={thmbox,
            overlay unbroken ={
                    \draw (title.south west)--(title.south east);
                    \draw ([xshift=3.5mm]frame.north west)|-([xshift=10cm]frame.south west);
                    \node[anchor=east] at (frame.south east) {$\square$};},
            overlay first={
                    \draw (title.south west)--(title.south east);
                    \draw ([xshift=3.5mm]frame.north west)--([xshift=3.5mm]frame.south west);},
            overlay middle={
                    \draw ([xshift=3.5mm]frame.north west)--([xshift=3.5mm]frame.south west);},
            overlay last={
                    \draw ([xshift=3.5mm]frame.north west)|-([xshift=10cm]frame.south west);
                    \node[anchor=east] at (frame.south east) {$\square$};},
        },
}

\newtcbtheorem[]{LEM}{Lemma}{thmbox,S}{theo}
\newtcbtheorem[]{Proof}{Proof}{thmbox,LQ}{theo}

\usepackage[autostyle=tryonce,autopunct=true]{csquotes}

\renewcommand{\mkcitation}[1]{ #1}

\usepackage{shapepar}
\usepackage{fancyvrb}
\usepackage{spot}
\usepackage{ifsym}
\usepackage{fancypar}
\usepackage{fancytabs}
\fancytabsHeight{5.25cm}
\definecolor{TestFonce}{cmyk}{1,1,1,0}
\definecolor{TestClair}{cmyk}{0.1,0.1,0.1,0}
\usepackage{textpos}
\usepackage{tikz-3dplot}
\usepackage[american]{circuitikz}
\usepackage{pgf}
\usepackage{tikz}
\usetikzlibrary{patterns}
\usetikzlibrary{shapes.geometric}

\usetikzlibrary{decorations.markings}
\usetikzlibrary{arrows}
\usetikzlibrary{fit}

\usepackage{textcomp}
\usetikzlibrary{babel}
\usepackage{schemabloc}
\usepackage{lettrine}

\usepackage{afterpage}

\newcommand\blankpage{
    \null
    \thispagestyle{empty}
    \addtocounter{page}{-1}
    \clearpage}

\usepackage[unicode=true, bookmarks=true, bookmarksnumbered=true, bookmarksopen=true, bookmarksopenlevel=1, breaklinks=true, pdfborder={0 0 0}, backref=true, colorlinks=true]{hyperref}

\definecolor{LinkCol}{rgb}{0,0,0.5}
\definecolor{CiteCol}{rgb}{0.5,0,0.1}

\usepackage{colortbl}
\arrayrulecolor{black}

\renewcommand{\headrulewidth}{\iffloatpage{0pt}{1.0pt}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Clear Header Style on the Last Empty Odd pages
\makeatletter

\def\cleardoublepage{\clearpage\if@twoside \ifodd\c@page\else%
            \hbox{}%
            \thispagestyle{empty}%              % Empty header styles
            \newpage%
            \if@twocolumn\hbox{}\newpage\fi\fi\fi}

\makeatother
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%\usepackage{ifpdf}
%\ifpdf

\usepackage[toc,page]{appendix}
\renewcommand{\appendixpagename}{Appendices}
\renewcommand{\appendixtocname}{\numberline{}Appendices}

\usepackage{csquotes}

\usepackage{verbatim}

\usepackage{enumitem}

\newcommand*\circled[1]{\tikz[baseline=(char.base)]{%
        \node[shape=circle,fill=white,draw,inner sep=2pt] (char) {#1};}}

\usepackage{microtype}

\newenvironment{Abstract}%
{\null\vfill\begin{center}%
        \bfseries\abstractname\end{center}}%
{\vfill\null}

\usepackage[savewrites,toc, style=long,nonumberlist]{glossaries}

\newglossary[slg]{symbolslist}{syi}{syg}{Symbols}
% \glsaddkey{unit}{\glsentrytext{\glslabel}}{\glsentryunit}{\GLsentryunit}{\glsunit}{\Glsunit}{\GLSunit}

\makeglossaries

\setacronymstyle{long-sc-short}

\input{to-include/gls-file.tex}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{lipsum}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\MyPara}{\lipsum[1]}
